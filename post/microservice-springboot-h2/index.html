<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title>Microservice Using Spring Boot, Hibernate and H2 Database - myzonesoft.com</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
	
	
	<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-6631563929908787"
     crossorigin="anonymous"></script>
	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
<script async src="https://www.googletagmanager.com/gtag/js?id=G-KY3NJW8CDF"></script>
<script>
var doNotTrack = false;
if (!doNotTrack) {
	window.dataLayer = window.dataLayer || [];
	function gtag(){dataLayer.push(arguments);}
	gtag('js', new Date());
	gtag('config', 'G-KY3NJW8CDF', { 'anonymize_ip': false });
}
</script>

</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="myzonesoft.com" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">myzonesoft.com</div>
					<div class="logo__tagline">A Technical Site for Everyone</div>
				</div>
		</a>
	</div>
		
<nav class="menu">
	<button class="menu__btn" aria-haspopup="true" aria-expanded="false" tabindex="0">
		<span class="menu__btn-title" tabindex="-1">Menu</span>
	</button>
	<ul class="menu__list">
		<li class="menu__item">
			<a class="menu__link" href="/">
				
				<span class="menu__text">Home</span>
				
			</a>
		</li>
		<li class="menu__item menu__dropdown">
			<a class="menu__link" href="/categories/microservice/">
				
				<span class="menu__text">Microservices</span>
				<label class="drop-icon" for="Microservices">▾</label>
				
			</a>
			<input type="checkbox" id="Microservices">
			<ul class="submenu__list">
				
					<li class="menu__item">
					<a class="menu__link" href="/categories/spring-boot/">
						
						<span class="menu__text">Spring Boot</span>
						
					</a>
					</li>
				
					<li class="menu__item">
					<a class="menu__link" href="/categories/dropwizard/">
						
						<span class="menu__text">Dropwizard</span>
						
					</a>
					</li>
				
					<li class="menu__item">
					<a class="menu__link" href="/categories/python/">
						
						<span class="menu__text">Python</span>
						
					</a>
					</li>
				
			</ul>
		</li>
		<li class="menu__item">
			<a class="menu__link" href="/categories/mvc/">
				
				<span class="menu__text">MVC</span>
				
			</a>
		</li>
		<li class="menu__item">
			<a class="menu__link" href="/categories/frontend/">
				
				<span class="menu__text">Frontend</span>
				
			</a>
		</li>
		<li class="menu__item menu__dropdown">
			<a class="menu__link" href="/categories/security/">
				
				<span class="menu__text">Security</span>
				<label class="drop-icon" for="Security">▾</label>
				
			</a>
			<input type="checkbox" id="Security">
			<ul class="submenu__list">
				
					<li class="menu__item">
					<a class="menu__link" href="/categories/spring-security/">
						
						<span class="menu__text">Spring Security</span>
						
					</a>
					</li>
				
			</ul>
		</li>
		<li class="menu__item menu__dropdown">
			<a class="menu__link" href="/categories/others/">
				
				<span class="menu__text">Others</span>
				<label class="drop-icon" for="Others">▾</label>
				
			</a>
			<input type="checkbox" id="Others">
			<ul class="submenu__list">
				
					<li class="menu__item">
					<a class="menu__link" href="/categories/hugo/">
						
						<span class="menu__text">Hugo</span>
						
					</a>
					</li>
				
			</ul>
		</li>
		<li class="menu__item">
			<a class="menu__link" href="/about/">
				
				<span class="menu__text">About Us</span>
				
			</a>
		</li>
	</ul>
</nav>

	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post" autonumbering>
		<header class="post__header"><div class="views">
    <span class="views">
        <img src="https://visitor-badge.glitch.me/badge?page_id=https%3a%2f%2fmyzonesoft.com%2fpost%2fmicroservice-springboot-h2%2f" alt="Views"/>
    </span>
</div>

			<h1 class="post__title">Microservice Using Spring Boot, Hibernate and H2 Database</h1>
			
			<div class="post__meta meta">
<div class="meta__item-datetime meta__item">
	<svg class="meta__icon icon icon-time" width="16" height="14" viewBox="0 0 30 28"><path d="M15 0C7 0 1 6 1 14s6 14 14 14 14-6 14-14S23 0 15 0zm0 25C9 25 4 20 4 14S9 3 15 3s11 5 11 11-5 11-11 11zm1-18h-2v8.4l6.8 4.4L22 18l-6-3.8V7z"/></svg><time class="meta__text" datetime="2020-07-21T00:00:00Z">July 21, 2020</time></div><div class="meta__item-categories meta__item"><svg class="meta__icon icon icon-category" width="16" height="16" viewBox="0 0 16 16"><path d="m7 2l1 2h8v11h-16v-13z"/></svg><span class="meta__text"><a class="meta__link" href="/categories/microservice/" rel="category">Microservice</a>, <a class="meta__link" href="/categories/spring-boot/" rel="category">Spring Boot</a>
	</span>
</div><div class="meta__item meta__icon">
<svg width="18" height="18" viewBox="0 0 88.965 88.966">
	<polygon points="66.436,56.656 61.639,56.656 61.639,72.438 75.096,72.438 75.096,67.641 66.436,67.641"/>
	<path d="M65.049,46.49v-3.342V23.541c0,0,0.008-6.385,0-6.465l-3.746-7.59l3.324-6.32c0.354-0.67,0.33-1.475-0.062-2.121
		C64.174,0.397,63.471,0,62.715,0H5.301C4.11,0,3.143,0.967,3.143,2.16l0.052,80.307h10.369V16.841H7.461V4.32h51.68l-2.186,4.15
		c-0.328,0.625-0.332,1.369-0.007,1.998l3.295,6.373h-42.43v65.625h7.915h6.818h14.526h2.236c3.865,4,9.273,6.5,15.264,6.5
		c11.719,0,21.25-9.532,21.25-21.25C85.825,56.158,76.547,46.746,65.049,46.49z M64.575,81.966c-7.857,0-14.25-6.394-14.25-14.25
		s6.393-14.25,14.25-14.25s14.25,6.394,14.25,14.25S72.432,81.966,64.575,81.966z"/>	
</svg>
 17 Minutes   Read   
</div></div>
		</header>
		
	<figure class="post__thumbnail thumbnail">
		
		<img class="thumbnail__image" src="/cover_images/microservice-springboot-h2.png" alt="Microservice Using Spring Boot, Hibernate and H2 Database">
		
	</figure>
<div class="post__toc toc">
	<div class="toc__title">Page content</div>
	<div class="toc__menu">
		<nav id="TableOfContents">
  <ul>
    <li><a href="#overview">Overview</a></li>
    <li><a href="#definitions">Definitions</a></li>
    <li><a href="#prerequisites">Prerequisites</a>
      <ul>
        <li><a href="#familiarity-with-technology-and-frameworks">Familiarity with Technology and Frameworks</a></li>
        <li><a href="#jdk-18">JDK 1.8+</a></li>
        <li><a href="#integrated-development-environment-ide-for-code-development">Integrated Development Environment (IDE) for Code Development</a></li>
        <li><a href="#other-related-software">Other related software</a></li>
      </ul>
    </li>
    <li><a href="#create-base-spring-boot-application">Create Base Spring Boot Application</a>
      <ul>
        <li><a href="#project-structure">Project Structure</a></li>
      </ul>
    </li>
    <li><a href="#running-the-spring-boot-project">Running the Spring Boot Project</a></li>
    <li><a href="#enhance-the-existing-application-to-expose-rest-apis">Enhance the Existing Application to Expose REST APIs</a>
      <ul>
        <li><a href="#final-project-structure">Final Project Structure</a></li>
        <li><a href="#add-context-path-to-the-spring-boot-project">Add Context Path to the Spring Boot Project</a></li>
        <li><a href="#adding-database">Adding Database</a></li>
        <li><a href="#pojo-model-classes">POJO Model Classes</a></li>
        <li><a href="#jpa-repository-interfaces">JPA Repository Interfaces</a></li>
        <li><a href="#add-rest-api-endpoint-for-create-operation">Add REST API Endpoint for CREATE Operation</a></li>
        <li><a href="#add-rest-api-endpoint-for-get-all-operation">Add REST API Endpoint for GET All Operation</a></li>
        <li><a href="#add-rest-api-endpoint-for-get-operation">Add REST API Endpoint for GET Operation</a></li>
        <li><a href="#add-rest-api-endpoint-for-update-operation">Add REST API Endpoint for UPDATE Operation</a></li>
        <li><a href="#add-rest-api-endpoint-for-delete-operation">Add REST API Endpoint for DELETE Operation</a></li>
      </ul>
    </li>
    <li><a href="#configure-spring-boot-to-handle-cors-request">Configure Spring Boot to Handle CORS Request</a></li>
    <li><a href="#conclusion">Conclusion</a></li>
  </ul>
</nav>
	</div>
</div><div class="content post__content clearfix">
			<script src="https://unpkg.com/vanilla-back-to-top@7.2.1/dist/vanilla-back-to-top.min.js"></script>
<script>addBackToTop({
  diameter: 56,
  backgroundColor: 'rgb(255, 82, 82)',
  textColor: '#fff'
})</script>
<p>In this article, I will develop a <strong>Microservice Application</strong> using <strong>Spring Boot Framework</strong> and <strong>H2 Database</strong> and expose all <em>CRUD (Create, Read, Update, Delete) Operations</em> as the REST APIs.</p>
<p><strong>Spring Boot Framework</strong> will serve as back-end server and I will be using <em><strong>Relational Database</strong></em> known as <strong>H2 Database</strong>, <em>it is also known as an Embedded Java Database</em>, for persisting(storing) the data.</p>
<p>By the end of this article, you would learn about how to:</p>
<ul>
<li>Configure Hibernate to work with <em>Relational Database</em> and persist the data.</li>
<li>Create and Expose <em><strong>REST APIs</strong></em> for CRUD Operations using <strong>Spring Boot</strong>.</li>
<li>How to handle <em><strong>HTTP</strong></em> and <em><strong>CORS</strong></em> Requests through REST Controller.</li>
</ul>
<hr>
<h2 id="overview">Overview</h2>
<p>We will build a <strong>Spring Boot Rest CRUD API</strong> for a <strong>Todo Task Application</strong> in that:</p>
<ul>
<li>Each <strong>Todo Task</strong> has <em>id, title, description, creation date, due date, status and comments</em>.</li>
<li>APIs help to <em>Create, Read, Update, Delete</em> <strong>Todo Tasks</strong>.</li>
</ul>
<p>Below mentioned are the <em><strong>REST APIs</strong></em> for CRUD Operations.</p>
<table>
<thead>
<tr>
<th style="text-align:center">Description</th>
<th style="text-align:center">CRUD Operation</th>
<th style="text-align:center">HTTP Method</th>
<th style="text-align:center">REST API Endpoint</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">Create New Todo Task</td>
<td style="text-align:center">CREATE</td>
<td style="text-align:center">POST</td>
<td style="text-align:center"><code>/todo-app/tasks/</code></td>
</tr>
<tr>
<td style="text-align:center">Fetch All Todo Tasks</td>
<td style="text-align:center">READ</td>
<td style="text-align:center">GET</td>
<td style="text-align:center"><code>/todo-app/tasks/</code></td>
</tr>
<tr>
<td style="text-align:center">Fetch One Todo Task</td>
<td style="text-align:center">READ</td>
<td style="text-align:center">GET</td>
<td style="text-align:center"><code>/todo-app/tasks/{id}</code></td>
</tr>
<tr>
<td style="text-align:center">Update One Specific Todo Task</td>
<td style="text-align:center">UPDATE</td>
<td style="text-align:center">PUT</td>
<td style="text-align:center"><code>/todo-app/tasks/</code></td>
</tr>
<tr>
<td style="text-align:center">Delete One Specific Todo Task</td>
<td style="text-align:center">DELETE</td>
<td style="text-align:center">DELETE</td>
<td style="text-align:center"><code>/todo-app/tasks/{id}</code></td>
</tr>
</tbody>
</table>
<p>If you have no time to read this article, but want to try the code for yourself, GitHub location is provided <a href="https://github.com/prasbhat/microservice-springboot-h2"
 target="_blank">here</a>. Go ahead and clone the code repository.</p>
<hr>
<h2 id="definitions">Definitions</h2>
<p><strong><a href="https://spring.io/projects/spring-boot"
 target="_blank">Spring Boot</a></strong> is an open source Java-based Framework used to create <strong>Microservices</strong>. It provides a good platform for Java developers to develop a stand-alone and production-grade <a href="https://spring.io/why-spring"
 target="_blank">Spring Applications</a> that you can <em><strong>just run</strong></em>. You can get started with minimum configurations without the need for an entire Spring configuration setup.</p>
<p><strong><a href="https://spring.io/microservices"
 target="_blank">Microservices</a></strong> is an architecture that allows the developers to develop and deploy services independently. Each service running has its own process and this achieves the lightweight model to support business applications. One of the most popular types of APIs for building Microservices applications is known as <em><strong>&ldquo;RESTful API&rdquo;</strong></em> or <em><strong>&ldquo;REST API&rdquo;</strong></em>.</p>
<p><strong>RE</strong>presentational <strong>S</strong>tate <strong>T</strong>ransfer <strong>(REST)</strong> is an architectural style that defines a set of constraints to be used for creating web services. <strong>REST API</strong> is a way of accessing web services in a simple and flexible way without having any processing. All communication done via REST API uses only <em>HTTP request</em>.</p>
<p><strong>Application Programming Interface (API)</strong> is a software intermediary that allows two applications to talk to each other. To simplify, an <em><strong>API</strong></em> delivers a user requests to a system and sends the system’s response back to a user.</p>
<hr>
<h2 id="prerequisites">Prerequisites</h2>
<p>There are some prerequisites that are required for creating the <strong>Microservice Spring Boot Application</strong>.</p>
<h3 id="familiarity-with-technology-and-frameworks">Familiarity with Technology and Frameworks</h3>
<p>It is assumed that you have prior knowledge or familiarity with <strong>Java Technology</strong>, <strong>Spring</strong>, <strong>Spring Boot</strong>, <strong>Hibernate Frameworks</strong>, <strong>working with RDBMS databases</strong> and <strong>basic SQL commands</strong>, because I will not be covering the basics of these in this article.</p>
<p>If you are not familiar, then it is advised to get the basic knowledge of these before continuing.</p>
<h3 id="jdk-18">JDK 1.8+</h3>
<p>Download the latest version of the <strong>Java JDK</strong> (1.16 was the latest, at the time of writing this article) from <a href="https://www.oracle.com/java/technologies/javase-downloads.html"
 target="_blank">here</a>. Click on the downloaded <em>.exe</em> and complete the installation.</p>
<blockquote>
<p>Since it is an Oracle Proprietary product you will need to <em>sign-in/create</em> Oracle Account, before downloading.</p>
</blockquote>
<h3 id="integrated-development-environment-ide-for-code-development">Integrated Development Environment (IDE) for Code Development</h3>
<p>You can use any IDE of your choice. I will be using the <em><strong>IntelliJ IDEA Community Edition</strong></em>.</p>
<p>If you wish to use the IntelliJ IDEA Community Edition, download the latest version from <a href="https://www.jetbrains.com/idea/download/download-thanks.html?platform=windows&amp;code=IIC"
 target="_blank">here</a>.</p>
<p>Click on the downloaded <em>.exe</em> and complete the installation.</p>
<h3 id="other-related-software">Other related software</h3>
<p><strong>Webserver</strong>– Tomcat is embedded in the Spring Boot application and can be used as Webserver for running this project.</p>
<p><strong>Project Management Tool (Maven)</strong>– Maven is embedded in the Spring Boot application and can be used for building and managing the Spring Boot project.</p>
<hr>
<h2 id="create-base-spring-boot-application">Create Base Spring Boot Application</h2>
<p>Let me first create the <em>Base Spring Boot Application</em>, the basic application without any of the customization. Later I will enhance it with different methods, to include <em>CRUD Operations</em> and <em>Expose REST APIs</em>, as discussed above.</p>
<p>To create the <em>Base Spring Boot Application</em>, I use <a href="https://start.spring.io/"
 target="_blank">Spring Boot Initializr</a>. This will setup the basic required <em>pom.xml</em> with maven dependencies and some sample Java files, so that we can run and test the application. This should help us in getting started.</p>
<p>Provide all the required information like: <em>Groups, Artifacts, Name, Description, Package Name, Java Version, Dependencies (Maven)</em> and click on <em><strong>Generate</strong></em>.

  <figure>
    <img src="images/spring-boot-initializr.jpeg" alt="spring-boot-initializr.jpeg" style="display: block;margin: 0.7rem auto;">
    <figcaption style="text-align: center;font-style: italic;font-size: smaller;">Spring Boot Initializr</figcaption>
  </figure>
</p>
<p>Zip file with the name, as specified in the <em>Name</em> field (in this case, <em><strong>microservice-springboot-h2.zip</strong></em>) will be created, that contains entire sample Spring Boot project setup.</p>
<p>Download it to local machine and unzip it.</p>
<p>Import the unzipped project into your installed IDE, as <em><strong>Existing Maven Project</strong></em>.</p>
<blockquote>
<p><em>IDE would import the project and resolve all the Maven dependencies, by downloading them (from the Maven Central Repository, over the internet) automatically (this might take some time, based on the network speed).</em></p>
</blockquote>
<h3 id="project-structure">Project Structure</h3>
<p>After all the dependencies are resolved, the project structure should be similar to below:

  <figure>
    <img src="images/vanilla-springboot-project-structure.jpeg" alt="vanilla-springboot-project-structure.jpeg" style="display: block;margin: 0.7rem auto;">
    <figcaption style="text-align: center;font-style: italic;font-size: smaller;">Bootstrap Spring Boot Project Structure</figcaption>
  </figure>
</p>
<p><em><strong>Java JDK is must for running the Spring Boot project. Make sure that it is installed and mapped to the project in your IDE, before launching the project.</strong></em></p>
<p>When you try to launch the project, without correct JDK mapped in IntelliJ IDE, you get below mentioned error:

  <figure>
    <img src="images/no-sdk-error.jpeg" alt="no-sdk-error.jpeg" style="display: block;margin: 0.7rem auto;">
    <figcaption style="text-align: center;font-style: italic;font-size: smaller;">No SDK Error</figcaption>
  </figure>
</p>
<p>To resolve this error: <em>Navigate to Files → Project Structure → Project Settings →Project → Project SDK and select the relevant JDK that is installed in your system, click</em> <em><strong>OK</strong></em></p>
<hr>
<h2 id="running-the-spring-boot-project">Running the Spring Boot Project</h2>
<p>To launch your Spring Boot Projects, follow the steps given below:</p>
<ul>
<li>
<p>Click on <strong>Add Configuration</strong> on top right corner, as shown below:

  <figure>
    <img src="images/ide-add-maven-run-configuration.jpeg" alt="ide-add-maven-run-configuration.jpeg" style="display: block;margin: 0.7rem auto;">
    <figcaption style="text-align: center;font-style: italic;font-size: smaller;">Configuration to add Maven inside IDE</figcaption>
  </figure>
</p>
</li>
<li>
<p>Click on <em><strong>+</strong></em> symbol and select <em><strong>Maven</strong></em> from dropdown list and in the <em><strong>Command line</strong></em> type: <code>spring-boot:run</code> and click <em><strong>Apply</strong></em> and then click <strong>OK</strong>.

  <figure>
    <img src="images/add-maven-run.jpeg" alt="add-maven-run.jpeg" style="display: block;margin: 0.7rem auto;">
    <figcaption style="text-align: center;font-style: italic;font-size: smaller;">NOTE: Name and Working directory will be auto populated. you can change the Name, if you wish.</figcaption>
  </figure>
</p>
</li>
<li>
<p>Now, on the main project screen in the IDE, click on the <em><strong>Green “Play” button</strong></em>, next to Configuration item added, just now and your project will be launched.</p>
</li>
</ul>
<p>If everything is setup properly, you will see that the <em><strong>Run</strong></em> window will be launched and <strong>Embedded Tomcat server</strong> will be started on <em>Port 8080 (default port)</em>.

  <figure>
    <img src="images/tomcat-server-running.jpeg" alt="tomcat-server-running.jpeg" style="display: block;margin: 0.7rem auto;">
    <figcaption style="text-align: center;font-style: italic;font-size: smaller;">Tomcat Server Running Successfully</figcaption>
  </figure>
</p>
<p>Go to any Browser and type – <code>http://localhost:8080/</code>

  <figure>
    <img src="images/whitelabel-error.jpeg" alt="whitelabel-error.jpeg" style="display: block;margin: 0.7rem auto;">
    <figcaption style="text-align: center;font-style: italic;font-size: smaller;">Whitelabel Error</figcaption>
  </figure>
</p>
<blockquote>
<p><em>At this moment, we will see this <strong>Whitelabel Error Page</strong>, as there are no REST API endpoints configured on the Spring Boot project</em>.</p>
<p>Once we configure REST API end points, this error will be resolved.</p>
</blockquote>
<hr>
<h2 id="enhance-the-existing-application-to-expose-rest-apis">Enhance the Existing Application to Expose REST APIs</h2>
<p>It is now time to enhance our project to include REST API endpoints, so that they can be exposed for consumption by other applications.</p>
<h3 id="final-project-structure">Final Project Structure</h3>
<p>The final project structure will look something like this:

  <figure>
    <img src="images/final-project-structure-2.jpeg" alt="final-project-structure-2.jpeg" style="display: block;margin: 0.7rem auto;">
    <figcaption style="text-align: center;font-style: italic;font-size: smaller;">Final Project Structure</figcaption>
  </figure>
</p>
<hr>
<h3 id="add-context-path-to-the-spring-boot-project">Add Context Path to the Spring Boot Project</h3>
<p>The <strong>Context Path</strong> is the <em>Prefix of a <strong>URL Path</strong></em> that is used to select the <strong>context(s)</strong> to which an incoming request is passed.</p>
<p>Currently, we have not specified any <strong>Context Path</strong> in our project, meaning API endpoints will be placed immediately after the <em>Domain URL</em> <code>&lt;hostname:port&gt;/&lt;api-endpoint&gt;</code> (like <code>http://localhost:8080/tasks</code> ).</p>
<p>However, it is always advisable to have a <strong>Context Path</strong> specific to projects, that will help in easily fetching project specific endpoints. Let us add the <strong>Context Path</strong>, relevant to this project.</p>
<p>It can be added in the <code>application.properties</code> file, located at <code>src/main/resources/</code></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span><span><span style="color:#f92672">#=========================</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2</span><span><span style="color:#f92672">#</span> <span style="color:#f92672">=</span> SERVER CONFIGURATION <span style="color:#f92672">=</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3</span><span><span style="color:#f92672">#=========================</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4</span><span>server.servlet.contextPath<span style="color:#f92672">=/</span>todo<span style="color:#f92672">-</span>app<span style="color:#f92672">/</span>
</span></span></code></pre></div><p>After this change, the endpoint looks like: <code>http://localhost:8080/todo-app/tasks</code> and the response we receive from the server, would still remain same.</p>
<hr>
<h3 id="adding-database">Adding Database</h3>
<p>We will first setup the database for persisting the data. I will be using the <strong>Relational Database</strong> known as <em><strong>H2 Database</strong></em>. It is called the <em>Java SQL database</em>. You can extend this to use any other Relational Database and only Database configurations needs to be changed.</p>
<p>The main features of H2 are:</p>
<ul>
<li>Very fast, open source, JDBC API</li>
<li>Embedded and server modes; in-memory databases</li>
<li>Browser based Console application</li>
<li>Small footprint: around 2 MB jar file size</li>
</ul>
<blockquote>
<p><em><strong>H2 Database should be used for development and testing purpose only</strong></em>.</p>
</blockquote>
<p>The reason why it should not be used as a database in production of bigger projects are mentioned below:</p>
<ul>
<li>It has very bad concurrent behavior (writing a row locks the whole table, therefore deadlocks are much more frequent).</li>
<li>Missing features and optimizations.</li>
<li>It has a poor query optimizer.</li>
<li>Limited size of the database.</li>
</ul>
<p>I will using the <em><strong>Embedded Version</strong></em> of the <em>H2 Database</em>. We will use <em>Hibernate</em> to interact with the Database.</p>
<p>For completing this setup, we will need to update/create few files/classes. Let us go ahead and complete that.</p>
<h4 id="update-pomxml">Update <code>pom.xml</code></h4>
<p>Add the <em>H2 Database and JPA related dependencies in the pom.xml</em> (if not added already during project initialization <a href="#create-bootstrap-spring-boot-application"
>here</a>)</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span><span><span style="color:#f92672">&lt;dependency&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2</span><span>	<span style="color:#f92672">&lt;groupId&gt;</span>org.springframework.boot<span style="color:#f92672">&lt;/groupId&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3</span><span>	<span style="color:#f92672">&lt;artifactId&gt;</span>spring-boot-starter-data-jpa<span style="color:#f92672">&lt;/artifactId&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4</span><span><span style="color:#f92672">&lt;/dependency&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5</span><span><span style="color:#f92672">&lt;dependency&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6</span><span>	<span style="color:#f92672">&lt;groupId&gt;</span>com.h2database<span style="color:#f92672">&lt;/groupId&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">7</span><span>	<span style="color:#f92672">&lt;artifactId&gt;</span>h2<span style="color:#f92672">&lt;/artifactId&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">8</span><span><span style="color:#f92672">&lt;/dependency&gt;</span>
</span></span></code></pre></div><h4 id="update-the-srcmainresourcesapplicationproperties">Update the <code>/src/main/resources/application.properties</code></h4>
<p>To add the <em>H2</em> configurations to the <em>Hibernate</em> settings.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span><span>spring<span style="color:#f92672">.</span><span style="color:#a6e22e">datasource</span><span style="color:#f92672">.</span><span style="color:#a6e22e">url</span><span style="color:#f92672">=</span>jdbc<span style="color:#f92672">:</span>h2<span style="color:#f92672">:</span>mem<span style="color:#f92672">:</span>todo<span style="color:#f92672">-</span>app
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2</span><span>spring<span style="color:#f92672">.</span><span style="color:#a6e22e">datasource</span><span style="color:#f92672">.</span><span style="color:#a6e22e">username</span><span style="color:#f92672">=</span>root
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3</span><span>spring<span style="color:#f92672">.</span><span style="color:#a6e22e">datasource</span><span style="color:#f92672">.</span><span style="color:#a6e22e">password</span><span style="color:#f92672">=</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4</span><span>spring<span style="color:#f92672">.</span><span style="color:#a6e22e">datasource</span><span style="color:#f92672">.</span><span style="color:#a6e22e">driver</span><span style="color:#f92672">-</span>class<span style="color:#f92672">-</span>name<span style="color:#f92672">=</span>org<span style="color:#f92672">.</span><span style="color:#a6e22e">h2</span><span style="color:#f92672">.</span><span style="color:#a6e22e">Driver</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5</span><span>spring<span style="color:#f92672">.</span><span style="color:#a6e22e">h2</span><span style="color:#f92672">.</span><span style="color:#a6e22e">console</span><span style="color:#f92672">.</span><span style="color:#a6e22e">enabled</span><span style="color:#f92672">=</span><span style="color:#66d9ef">true</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6</span><span>spring<span style="color:#f92672">.</span><span style="color:#a6e22e">jpa</span><span style="color:#f92672">.</span><span style="color:#a6e22e">properties</span><span style="color:#f92672">.</span><span style="color:#a6e22e">hibernate</span><span style="color:#f92672">.</span><span style="color:#a6e22e">dialect</span><span style="color:#f92672">=</span>org<span style="color:#f92672">.</span><span style="color:#a6e22e">hibernate</span><span style="color:#f92672">.</span><span style="color:#a6e22e">dialect</span><span style="color:#f92672">.</span><span style="color:#a6e22e">H2Dialect</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">7</span><span>spring<span style="color:#f92672">.</span><span style="color:#a6e22e">jpa</span><span style="color:#f92672">.</span><span style="color:#a6e22e">show</span><span style="color:#f92672">-</span>sql<span style="color:#f92672">=</span><span style="color:#66d9ef">true</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">8</span><span>spring<span style="color:#f92672">.</span><span style="color:#a6e22e">jpa</span><span style="color:#f92672">.</span><span style="color:#a6e22e">hibernate</span><span style="color:#f92672">.</span><span style="color:#a6e22e">ddl</span><span style="color:#f92672">-</span>auto<span style="color:#f92672">=</span>create<span style="color:#f92672">-</span>drop
</span></span></code></pre></div><p>Let us look at some of the values that are used for configuring Database.</p>
<ul>
<li><strong>Datasource URL, username, password and driver class</strong> are required for connecting to database.
<ul>
<li><code>todo-app</code> is the name of my database.</li>
<li><code>jdbc:h2:mem</code> represents embedded in-memory database.</li>
</ul>
</li>
<li><code>spring.h2.console.enabled=true</code> – This enables us to use the H2 console on the browser.</li>
<li><code>spring.jpa.properties.hibernate.dialect</code>– We need to provide the dialect for Hibernate. The dialect specifies the type of database used in hibernate so that hibernate can generate appropriate type of SQL statements.</li>
<li><code>spring.jpa.show-sql</code> - Show the SQL query logs or not. Values are <code>true</code> or <code>false</code>.</li>
<li><code>spring.jpa.hibernate.ddl-auto</code> is used to validate and export schema DDL to the database when the SessionFactory is created. 
It takes following values:
<ul>
<li><code>create</code>– Hibernate first drops the existing tables data and structure, then creates new tables and executes the operations on the newly created tables. With create, we will lose existing table data.</li>
<li><code>validate</code>– Hibernate only validates the table structure, whether the table and columns have existed or not. If the table doesn’t exist then hibernate throws an exception. Validate is the default value.</li>
<li><code>update</code>– Hibernate checks for the tables and columns. If a table doesn’t exist then it creates new tables and where as if a column doesn’t exist it creates new columns for it. Hibernate doesn’t drop any existing tables, so that we don’t lose existing table data.</li>
<li><code>create-drop</code>– Hibernate first checks for a table and do the necessary operations, if not found creates new tables and finally drops the table after all the operations were completed. This is useful in running unit and integrations tests.</li>
</ul>
</li>
</ul>
<p><em>Once the above configuration changes are complete</em>, <strong>Restart</strong> the Spring Boot Application and next time when Tomcat server starts, it would have created <em>H2 Database</em>.

  <figure>
    <img src="images/h2-database-start.jpeg" alt="h2-database-start.jpeg" style="display: block;margin: 0.7rem auto;">
    <figcaption style="text-align: center;font-style: italic;font-size: smaller;">Tomcat Server re-starts and creates tables in H2 Database</figcaption>
  </figure>
</p>
<p>Open any browser and type in <code>http://localhost:8080/todo-app/h2-console</code>, you get the <em><strong>H2 Console Login Screen</strong></em> similar to below:

  <figure>
    <img src="images/h2-console-login-page.jpeg" alt="h2-console-login-page.jpeg" style="display: block;margin: 0.7rem auto;">
    <figcaption style="text-align: center;font-style: italic;font-size: smaller;">H2 Console Login Page</figcaption>
  </figure>
</p>
<p>Since we have <code>spring.datasource.password</code> field <em><strong>BLANK</strong></em> in the <code>application.properties</code>, no need to enter the <strong>password</strong> and you can either click on <em>Test Connection or Connect</em>.</p>
<p>Now that database is setup and ready, let us create some entities and interfaces to interact with them.</p>
<h3 id="pojo-model-classes">POJO Model Classes</h3>
<p><em><strong>Plain Old Java Object(POJO)</strong></em> <strong>Model Classes</strong> are an ordinary Java Objects, not bound by any special restriction other than those forced by the Java Language Specification and not requiring any classpath.</p>
<p>A <em><strong>POJO Class</strong></em> should not:</p>
<ul>
<li>Extend any <em>prespecified</em> classes.</li>
<li>Implement <em>prespecified</em> interfaces.</li>
</ul>
<p>POJOs basically defines an entities in Hibernate, which in turn defines the tables in the databases.</p>
<ol>
<li><code>model.Tasks</code></li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1</span><span><span style="color:#a6e22e">@Entity</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2</span><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Tasks</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3</span><span>    <span style="color:#a6e22e">@Id</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4</span><span>    <span style="color:#a6e22e">@GeneratedValue</span><span style="color:#f92672">(</span>strategy <span style="color:#f92672">=</span> GenerationType<span style="color:#f92672">.</span><span style="color:#a6e22e">AUTO</span><span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5</span><span>    <span style="color:#66d9ef">private</span> Long systemTasksId<span style="color:#f92672">;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6</span><span>    <span style="color:#66d9ef">private</span> String title<span style="color:#f92672">;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7</span><span>    <span style="color:#66d9ef">private</span> String description<span style="color:#f92672">;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8</span><span>    <span style="color:#66d9ef">private</span> LocalDate creationDate<span style="color:#f92672">;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9</span><span>    <span style="color:#66d9ef">private</span> LocalDate dueDate<span style="color:#f92672">;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10</span><span>    <span style="color:#66d9ef">private</span> String status<span style="color:#f92672">;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11</span><span>    
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12</span><span>    <span style="color:#a6e22e">@JsonManagedReference</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13</span><span>    <span style="color:#a6e22e">@OneToMany</span><span style="color:#f92672">(</span>mappedBy <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;todoTask&#34;</span><span style="color:#f92672">,</span> fetch <span style="color:#f92672">=</span> FetchType<span style="color:#f92672">.</span><span style="color:#a6e22e">EAGER</span><span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14</span><span>    <span style="color:#66d9ef">private</span> Set<span style="color:#f92672">&lt;</span>TodoTaskComments<span style="color:#f92672">&gt;</span> todoTaskCommentsSet<span style="color:#f92672">;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16</span><span>    <span style="color:#75715e">//Empty Constructor
</span></span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17</span><span><span style="color:#75715e"></span>    <span style="color:#75715e">//Constructor with all fields
</span></span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18</span><span><span style="color:#75715e"></span>    <span style="color:#75715e">//Getters and Setters
</span></span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19</span><span><span style="color:#75715e"></span>    <span style="color:#75715e">//toString method for converting POJO to string 
</span></span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20</span><span><span style="color:#75715e"></span><span style="color:#f92672">}</span>
</span></span></code></pre></div><p>Some of the Hibernate Annotations used in the above code are explained below:</p>
<ul>
<li><code>@Entity</code>– Letting the Hibernate know that this <em><strong>POJO Model Class</strong></em> is to be converted to Table in the database and its private variables into Columns of that Table.</li>
<li><code>@Id</code>– To identify the primary key of the table.</li>
<li><code>@GeneratedValue(strategy = GenerationType.AUTO)</code>– To Auto Generate the sequence for the Primary Key. There are different strategies available, based on the database that is used.</li>
<li><code>@JsonManagedReference</code>- This is required to avoid the <strong>&ldquo;Could not write JSON: Infinite recursion (StackOverflowError); nested exception&rdquo;</strong>. <em>Where in, the output goes into infinite recursive loop and eventually <em><strong>StackOverflowError</strong></em> error is thrown</em>. This annotation requires <code>@JsonBackReference</code> to be added on the referenced variable of the back reference class <em>(more on this below)</em>.</li>
<li><code>@OneToMany</code>- Each Todo task can have many comments.
<ul>
<li>So there is a <strong>One-To-Many relationship</strong> between <em><strong>Todo POJO Model Class</strong></em> and <em><strong>TodoTaskComments POJO Model Class</strong></em>.</li>
<li>We are using <code>mappedBy</code> attribute, where we inform the Hibernate which variable is responsible for updating this relationship.</li>
</ul>
</li>
</ul>
<ol start="2">
<li><code>model.TodoTaskComments</code></li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1</span><span><span style="color:#a6e22e">@Entity</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2</span><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">TodoTaskComments</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3</span><span>    <span style="color:#a6e22e">@Id</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4</span><span>    <span style="color:#a6e22e">@GeneratedValue</span><span style="color:#f92672">(</span>strategy <span style="color:#f92672">=</span> GenerationType<span style="color:#f92672">.</span><span style="color:#a6e22e">AUTO</span><span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5</span><span>    <span style="color:#66d9ef">private</span> Long todoTaskCommentsId<span style="color:#f92672">;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7</span><span>    <span style="color:#66d9ef">private</span> String taskComments<span style="color:#f92672">;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8</span><span>    <span style="color:#66d9ef">private</span> LocalDate creationDate<span style="color:#f92672">;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10</span><span>    <span style="color:#a6e22e">@JsonBackReference</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11</span><span>    <span style="color:#a6e22e">@ManyToOne</span><span style="color:#f92672">(</span>fetch <span style="color:#f92672">=</span> FetchType<span style="color:#f92672">.</span><span style="color:#a6e22e">EAGER</span><span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12</span><span>    <span style="color:#a6e22e">@JoinColumn</span><span style="color:#f92672">(</span>name<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;systemTasksId&#34;</span><span style="color:#f92672">,</span> nullable<span style="color:#f92672">=</span><span style="color:#66d9ef">false</span><span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13</span><span>    <span style="color:#66d9ef">private</span> Tasks todoTask<span style="color:#f92672">;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15</span><span>    <span style="color:#75715e">//Empty Constructor
</span></span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16</span><span><span style="color:#75715e"></span>    <span style="color:#75715e">//Constructor with all fields
</span></span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17</span><span><span style="color:#75715e"></span>    <span style="color:#75715e">//Getters and Setters
</span></span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18</span><span><span style="color:#75715e"></span>    <span style="color:#75715e">//toString method for converting POJO to string 
</span></span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19</span><span><span style="color:#75715e"></span><span style="color:#f92672">}</span>
</span></span></code></pre></div><p>Some of the Hibernate Annotations used in the above code are explained below:</p>
<ul>
<li><code>@JsonBackReference</code>- As explained above, this is used for referring the Back Reference Class.</li>
<li><code>@ManyToOne</code>- Reverse mapping for the OneToMany explained above.</li>
<li><code>@JoinColumn</code>- Refers to the Primary Key of the Main Model Class.</li>
</ul>
<h3 id="jpa-repository-interfaces">JPA Repository Interfaces</h3>
<p><strong>Spring Boot JPA</strong> is a Java specification for managing relational data in Java applications. It allows us to access and persist data between Java Objects/Classes and Relational Databases.</p>
<p>In Spring Boot, it is enough to create a <strong>Repository Interface</strong> extending the <strong>JPA Repository Interfaces</strong> to have CRUD operations on the <em><strong>POJO Model Classes</strong></em>. There should be only one <strong>Repository Interface</strong> per <em><strong>POJO Model Class</strong></em>. These Interfaces act as <em><strong>Data Transfer Object(DTO) Classes</strong></em>.</p>
<ol>
<li><code>repository.TasksRepository</code></li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span><span><span style="color:#a6e22e">@Repository</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2</span><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">interface</span> <span style="color:#a6e22e">TasksRepository</span> <span style="color:#66d9ef">extends</span> JpaRepository<span style="color:#f92672">&lt;</span>Tasks<span style="color:#f92672">,</span> Long<span style="color:#f92672">&gt;</span> <span style="color:#f92672">{</span> <span style="color:#f92672">}</span>
</span></span></code></pre></div><p>Some of the Hibernate Annotations used in the above code are explained below:</p>
<ul>
<li><code>@Repository</code>- This Hibernate Annotation represents this interface as the Repository, meaning a <em><strong>Data Transfer Object(DTO) Class</strong></em>.</li>
<li>This interface extends <code>org.springframework.data.jpa.repository.JpaRepository</code>.</li>
<li>We need to provide the name of the <em><strong>POJO Model Class</strong></em> and the <em>Data type of the Primary Key of that</em> <em><strong>POJO Model Class</strong></em>.</li>
</ul>
<ol start="2">
<li><code>repository.TodoTaskCommentsRepository</code></li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span><span><span style="color:#a6e22e">@Repository</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2</span><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">interface</span> <span style="color:#a6e22e">TodoTaskCommentsRepository</span> <span style="color:#66d9ef">extends</span> JpaRepository<span style="color:#f92672">&lt;</span>TodoTaskComments<span style="color:#f92672">,</span> Long<span style="color:#f92672">&gt;</span> <span style="color:#f92672">{</span> <span style="color:#f92672">}</span>
</span></span></code></pre></div><p>Now if we login to the H2 database, we see the below schema:

  <figure>
    <img src="images/h2-database-schema.jpeg" alt="h2-database-schema.jpeg" style="display: block;margin: 0.7rem auto;">
    <figcaption style="text-align: center;font-style: italic;font-size: smaller;">H2 Database Schema</figcaption>
  </figure>
</p>
<p>In the above schema, if we observe carefully, since in our <em><strong>OneToMany Relationship mapping</strong></em>(in the <em><strong>Tasks Model Class</strong></em>), we have specified <code>mappedBy = &quot;todoTask&quot;</code> attribute and <code>@JoinCoulmn</code> in the <em><strong>TodoTaskComments Model Class</strong></em>, there is <em>No Column created for TodoTaskComments in the</em> <em><strong>Tasks table</strong></em>.</p>
<p>However in the <strong>TodoTaskComments table</strong>, we have a Column called <strong>systemTasksId</strong>, which maps to <strong>systemTasksId</strong> Column in <strong>Tasks table</strong>.</p>
<p>Now, with this basic understanding of how Models, Entities and Tables mapping works in Hibernate, let us move on and add some REST API Endpoints.</p>
<hr>
<h3 id="add-rest-api-endpoint-for-create-operation">Add REST API Endpoint for CREATE Operation</h3>
<table>
<thead>
<tr>
<th style="text-align:center">Description</th>
<th style="text-align:center">CRUD Operation</th>
<th style="text-align:center">HTTP Method</th>
<th style="text-align:center">REST API Endpoint</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">Create New Todo Task</td>
<td style="text-align:center">CREATE</td>
<td style="text-align:center">POST</td>
<td style="text-align:center"><code>/todo-app/tasks/</code></td>
</tr>
</tbody>
</table>
<p>For creating this endpoint, we would need to create following classes:</p>
<ul>
<li><strong>Service Class</strong> = <code>service.TodoService</code></li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1</span><span><span style="color:#a6e22e">@Service</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2</span><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">TodoService</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4</span><span>    <span style="color:#75715e">//Autowired the JPA Repository
</span></span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5</span><span><span style="color:#75715e"></span>    <span style="color:#a6e22e">@Autowired</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6</span><span>    <span style="color:#66d9ef">private</span> TasksRepository tasksRepository<span style="color:#f92672">;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8</span><span>    <span style="color:#a6e22e">@Autowired</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9</span><span>    <span style="color:#66d9ef">private</span> TodoTaskCommentsRepository todoTaskCommentsRepository<span style="color:#f92672">;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11</span><span>    <span style="color:#66d9ef">public</span> Tasks <span style="color:#a6e22e">createOrUpdate</span><span style="color:#f92672">(</span>Tasks task<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12</span><span>        <span style="color:#75715e">//Get the list of TodoTaskComments from the Request Body
</span></span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13</span><span><span style="color:#75715e"></span>        Set<span style="color:#f92672">&lt;</span>TodoTaskComments<span style="color:#f92672">&gt;</span> todoTaskCommentsSet <span style="color:#f92672">=</span> task<span style="color:#f92672">.</span><span style="color:#a6e22e">getTodoTaskCommentsSet</span><span style="color:#f92672">();</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15</span><span>        <span style="color:#75715e">//Save the TodoTaskComments before task can be saved
</span></span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16</span><span><span style="color:#75715e"></span>        <span style="color:#66d9ef">if</span><span style="color:#f92672">(</span>todoTaskCommentsSet <span style="color:#f92672">!=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17</span><span>            <span style="color:#66d9ef">for</span> <span style="color:#f92672">(</span>TodoTaskComments todoTaskComments <span style="color:#f92672">:</span> todoTaskCommentsSet<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18</span><span>                <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>todoTaskComment <span style="color:#f92672">!=</span> <span style="color:#66d9ef">null</span> <span style="color:#f92672">&amp;&amp;</span> <span style="color:#f92672">!</span>todoTaskComment<span style="color:#f92672">.</span><span style="color:#a6e22e">getTaskComments</span><span style="color:#f92672">().</span><span style="color:#a6e22e">isEmpty</span><span style="color:#f92672">())</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19</span><span>                    todoTaskComments<span style="color:#f92672">.</span><span style="color:#a6e22e">setTodoTask</span><span style="color:#f92672">(</span>task<span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20</span><span>                    todoTaskComments<span style="color:#f92672">.</span><span style="color:#a6e22e">setCreationDate</span><span style="color:#f92672">(</span>LocalDate<span style="color:#f92672">.</span><span style="color:#a6e22e">now</span><span style="color:#f92672">());</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21</span><span>                    todoTaskCommentsRepository<span style="color:#f92672">.</span><span style="color:#a6e22e">save</span><span style="color:#f92672">(</span>todoTaskComments<span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22</span><span>                <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23</span><span>            <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24</span><span>        <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26</span><span>        <span style="color:#75715e">//Set the Creation Date only during initial creation of the task
</span></span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">27</span><span><span style="color:#75715e"></span>        <span style="color:#66d9ef">if</span><span style="color:#f92672">(</span>task<span style="color:#f92672">.</span><span style="color:#a6e22e">getCreationDate</span><span style="color:#f92672">()</span> <span style="color:#f92672">==</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">28</span><span>            task<span style="color:#f92672">.</span><span style="color:#a6e22e">setCreationDate</span><span style="color:#f92672">(</span>LocalDate<span style="color:#f92672">.</span><span style="color:#a6e22e">now</span><span style="color:#f92672">());</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">29</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">30</span><span>        task <span style="color:#f92672">=</span> tasksRepository<span style="color:#f92672">.</span><span style="color:#a6e22e">save</span><span style="color:#f92672">(</span>task<span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">31</span><span>        <span style="color:#66d9ef">return</span> task<span style="color:#f92672">;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">32</span><span>    <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">33</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">34</span><span>    <span style="color:#66d9ef">public</span> List<span style="color:#f92672">&lt;</span>String<span style="color:#f92672">&gt;</span> <span style="color:#a6e22e">getTodoStatusAsList</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">35</span><span>        List<span style="color:#f92672">&lt;</span>String<span style="color:#f92672">&gt;</span> taskStatusList <span style="color:#f92672">=</span> Stream<span style="color:#f92672">.</span><span style="color:#a6e22e">of</span><span style="color:#f92672">(</span>TASK_STATUS<span style="color:#f92672">.</span><span style="color:#a6e22e">values</span><span style="color:#f92672">()).</span><span style="color:#a6e22e">map</span><span style="color:#f92672">(</span>TASK_STATUS<span style="color:#f92672">::</span>name<span style="color:#f92672">).</span><span style="color:#a6e22e">collect</span><span style="color:#f92672">(</span>Collectors<span style="color:#f92672">.</span><span style="color:#a6e22e">toList</span><span style="color:#f92672">());</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">36</span><span>        <span style="color:#66d9ef">return</span> taskStatusList<span style="color:#f92672">;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">37</span><span>    <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">38</span><span><span style="color:#f92672">}</span>
</span></span></code></pre></div><ul>
<li><strong>Util Interface</strong>, for storing all the constants, enums and other values= <code>util.TodoApplicationConstants</code></li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">interface</span> <span style="color:#a6e22e">TodoApplicationConstants</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2</span><span>    <span style="color:#75715e">//Enums
</span></span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3</span><span><span style="color:#75715e"></span>    <span style="color:#66d9ef">enum</span> TASK_STATUS <span style="color:#f92672">{</span>NOT_STARTED<span style="color:#f92672">,</span> IN_PROGRESS<span style="color:#f92672">,</span> ON_HOLD<span style="color:#f92672">,</span> COMPLETED<span style="color:#f92672">,</span> DEFERRED<span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4</span><span><span style="color:#f92672">}</span>
</span></span></code></pre></div><ul>
<li><strong>Controller Class</strong>, for exposing the REST APIs = <code>controller.TodoController</code></li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1</span><span><span style="color:#a6e22e">@RequestMapping</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;/tasks&#34;</span><span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2</span><span><span style="color:#a6e22e">@RestController</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3</span><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">TodoController</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4</span><span>    <span style="color:#a6e22e">@Autowired</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5</span><span>    <span style="color:#66d9ef">private</span> TodoService todoService<span style="color:#f92672">;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7</span><span>    <span style="color:#a6e22e">@PostMapping</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8</span><span>    <span style="color:#66d9ef">public</span> ResponseEntity<span style="color:#f92672">&lt;</span>Tasks<span style="color:#f92672">&gt;</span> <span style="color:#a6e22e">createTodoTask</span><span style="color:#f92672">(</span><span style="color:#a6e22e">@RequestBody</span> Tasks task<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9</span><span>        task <span style="color:#f92672">=</span> todoService<span style="color:#f92672">.</span><span style="color:#a6e22e">createOrUpdate</span><span style="color:#f92672">(</span>task<span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10</span><span>        <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">new</span> ResponseEntity<span style="color:#f92672">&lt;&gt;(</span>task<span style="color:#f92672">,</span> HttpStatus<span style="color:#f92672">.</span><span style="color:#a6e22e">CREATED</span><span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11</span><span>    <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12</span><span><span style="color:#f92672">}</span>
</span></span></code></pre></div><p>Now, <em>Open any REST client</em> and provide values, as per the below table and see the response from the server.</p>
<table><tbody><tr><td><strong>HTTP Method</strong></td><td>POST</td></tr><tr><td><strong>Endpoint URL</strong></td><td><em>http://localhost:8080/todo-app/tasks</em></td></tr><tr><td><strong>Request Header</strong></td><td><code>Content-type: application/json</code></td></tr><tr><td><strong>Request Body</strong></td><td><code><em>{<br>&nbsp;&nbsp;"title":&nbsp;"Testing&nbsp;the&nbsp;Application",<br>&nbsp;&nbsp;"description":&nbsp;"Testing&nbsp;the&nbsp;Application",<br>&nbsp;&nbsp;"dueDate":&nbsp;"2022-05-31",<br>&nbsp;&nbsp;"status":&nbsp;"NOT_STARTED",<br>&nbsp;&nbsp;"todoTaskCommentsSet":&nbsp;[]<br>}</em></code></td></tr></tbody></table>
<p>
  <figure>
    <img src="images/create-api-response-2.jpeg" alt="create-api-response-2.jpeg" style="display: block;margin: 0.7rem auto;">
    <figcaption style="text-align: center;font-style: italic;font-size: smaller;">Server Response for POST API call</figcaption>
  </figure>
</p>
<hr>
<h3 id="add-rest-api-endpoint-for-get-all-operation">Add REST API Endpoint for GET All Operation</h3>
<table>
<thead>
<tr>
<th style="text-align:center">Description</th>
<th style="text-align:center">CRUD Operation</th>
<th style="text-align:center">HTTP Method</th>
<th style="text-align:center">REST API Endpoint</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">Fetch All Todo Tasks</td>
<td style="text-align:center">READ</td>
<td style="text-align:center">GET</td>
<td style="text-align:center"><code>/todo-app/tasks/</code></td>
</tr>
</tbody>
</table>
<p>For creating this endpoint, we would need to update following classes:</p>
<ul>
<li><strong>Service Class</strong> = <code>service.TodoService</code></li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span><span><span style="color:#66d9ef">public</span> List<span style="color:#f92672">&lt;</span>Tasks<span style="color:#f92672">&gt;</span> <span style="color:#a6e22e">findAll</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2</span><span>    List<span style="color:#f92672">&lt;</span>Tasks<span style="color:#f92672">&gt;</span> tasksList <span style="color:#f92672">=</span> tasksRepository<span style="color:#f92672">.</span><span style="color:#a6e22e">findAll</span><span style="color:#f92672">();</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3</span><span>    <span style="color:#66d9ef">return</span> tasksList<span style="color:#f92672">;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4</span><span><span style="color:#f92672">}</span>
</span></span></code></pre></div><ul>
<li><strong>Controller Class</strong> = <code>controller.TodoController</code></li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span><span><span style="color:#a6e22e">@GetMapping</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2</span><span><span style="color:#66d9ef">public</span> ResponseEntity<span style="color:#f92672">&lt;</span>List<span style="color:#f92672">&lt;</span>Tasks<span style="color:#f92672">&gt;&gt;</span> <span style="color:#a6e22e">getAllTasks</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3</span><span>    <span style="color:#66d9ef">try</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4</span><span>        List<span style="color:#f92672">&lt;</span>Tasks<span style="color:#f92672">&gt;</span> tasksList <span style="color:#f92672">=</span> todoService<span style="color:#f92672">.</span><span style="color:#a6e22e">findAll</span><span style="color:#f92672">();</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5</span><span>        <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">new</span> ResponseEntity<span style="color:#f92672">&lt;&gt;(</span>tasksList<span style="color:#f92672">,</span> HttpStatus<span style="color:#f92672">.</span><span style="color:#a6e22e">OK</span><span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6</span><span>    <span style="color:#f92672">}</span> <span style="color:#66d9ef">catch</span> <span style="color:#f92672">(</span>Exception ex<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">7</span><span>        <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">new</span> ResponseEntity<span style="color:#f92672">&lt;&gt;(</span><span style="color:#66d9ef">null</span><span style="color:#f92672">,</span> HttpStatus<span style="color:#f92672">.</span><span style="color:#a6e22e">INTERNAL_SERVER_ERROR</span><span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">8</span><span>    <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">9</span><span><span style="color:#f92672">}</span>
</span></span></code></pre></div><p>Now, <em>Open any REST client</em> and provide values, as per the below table and see the response from the server.</p>
<table>
<thead>
<tr>
<th style="text-align:center">HTTP Method</th>
<th style="text-align:center">Endpoint URL</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">GET</td>
<td style="text-align:center"><code>http://localhost:8080/todo-app/tasks</code></td>
</tr>
</tbody>
</table>
<p>
  <figure>
    <img src="images/find-all-api-response-2.jpeg" alt="find-all-api-response-2.jpeg" style="display: block;margin: 0.7rem auto;">
    <figcaption style="text-align: center;font-style: italic;font-size: smaller;">Server Response for GET All API call</figcaption>
  </figure>
</p>
<hr>
<h3 id="add-rest-api-endpoint-for-get-operation">Add REST API Endpoint for GET Operation</h3>
<table>
<thead>
<tr>
<th style="text-align:center">Description</th>
<th style="text-align:center">CRUD Operation</th>
<th style="text-align:center">HTTP Method</th>
<th style="text-align:center">REST API Endpoint</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">Fetch One Todo Task</td>
<td style="text-align:center">READ</td>
<td style="text-align:center">GET</td>
<td style="text-align:center"><code>/todo-app/tasks/{id}</code></td>
</tr>
</tbody>
</table>
<p>For creating this endpoint, we would need to update following classes:</p>
<ul>
<li><strong>Service Class</strong> = <code>service.TodoService</code></li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span><span><span style="color:#66d9ef">public</span> Optional<span style="color:#f92672">&lt;</span>Tasks<span style="color:#f92672">&gt;</span> <span style="color:#a6e22e">findById</span><span style="color:#f92672">(</span><span style="color:#66d9ef">long</span> id<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2</span><span>    Optional<span style="color:#f92672">&lt;</span>Tasks<span style="color:#f92672">&gt;</span> task <span style="color:#f92672">=</span> tasksRepository<span style="color:#f92672">.</span><span style="color:#a6e22e">findById</span><span style="color:#f92672">(</span>id<span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3</span><span>    <span style="color:#66d9ef">return</span> task<span style="color:#f92672">;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4</span><span><span style="color:#f92672">}</span>
</span></span></code></pre></div><ul>
<li><strong>Controller Class</strong> = <code>controller.TodoController</code></li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span><span><span style="color:#a6e22e">@GetMapping</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;/{id}&#34;</span><span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2</span><span><span style="color:#66d9ef">public</span> ResponseEntity<span style="color:#f92672">&lt;</span>Tasks<span style="color:#f92672">&gt;</span> <span style="color:#a6e22e">getTasksById</span><span style="color:#f92672">(</span><span style="color:#a6e22e">@PathVariable</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;id&#34;</span><span style="color:#f92672">)</span> <span style="color:#66d9ef">long</span> id<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3</span><span>    Optional<span style="color:#f92672">&lt;</span>Tasks<span style="color:#f92672">&gt;</span> task <span style="color:#f92672">=</span> todoService<span style="color:#f92672">.</span><span style="color:#a6e22e">findById</span><span style="color:#f92672">(</span>id<span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4</span><span>    <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>task<span style="color:#f92672">.</span><span style="color:#a6e22e">isPresent</span><span style="color:#f92672">())</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5</span><span>        <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">new</span> ResponseEntity<span style="color:#f92672">&lt;&gt;(</span>task<span style="color:#f92672">.</span><span style="color:#a6e22e">get</span><span style="color:#f92672">(),</span> HttpStatus<span style="color:#f92672">.</span><span style="color:#a6e22e">OK</span><span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6</span><span>    <span style="color:#f92672">}</span> <span style="color:#66d9ef">else</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">7</span><span>        <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">new</span> ResponseEntity<span style="color:#f92672">&lt;&gt;(</span><span style="color:#66d9ef">null</span><span style="color:#f92672">,</span> HttpStatus<span style="color:#f92672">.</span><span style="color:#a6e22e">NOT_FOUND</span><span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">8</span><span>    <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">9</span><span><span style="color:#f92672">}</span>
</span></span></code></pre></div><p>Now, <em>Open any REST client</em> and provide values, as per the below table and see the response from the server.</p>
<table>
<thead>
<tr>
<th style="text-align:center">HTTP Method</th>
<th style="text-align:center">Endpoint URL</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">GET</td>
<td style="text-align:center"><code>http://localhost:8080/todo-app/tasks/1</code></td>
</tr>
</tbody>
</table>
<p>
  <figure>
    <img src="images/find-one-api-response-2.jpeg" alt="find-one-api-response-2.jpeg" style="display: block;margin: 0.7rem auto;">
    <figcaption style="text-align: center;font-style: italic;font-size: smaller;">Server Response for GET API call</figcaption>
  </figure>
</p>
<hr>
<h3 id="add-rest-api-endpoint-for-update-operation">Add REST API Endpoint for UPDATE Operation</h3>
<table>
<thead>
<tr>
<th style="text-align:center">Description</th>
<th style="text-align:center">CRUD Operation</th>
<th style="text-align:center">HTTP Method</th>
<th style="text-align:center">REST API Endpoint</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">Update One Specific Todo Task</td>
<td style="text-align:center">UPDATE</td>
<td style="text-align:center">PUT</td>
<td style="text-align:center"><code>/todo-app/tasks/</code></td>
</tr>
</tbody>
</table>
<p>For creating this endpoint, we would need to update following classes:</p>
<ul>
<li><strong>Controller Class</strong> = <code>controller.TodoController</code></li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span><span><span style="color:#a6e22e">@PutMapping</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2</span><span><span style="color:#66d9ef">public</span> ResponseEntity<span style="color:#f92672">&lt;</span>Tasks<span style="color:#f92672">&gt;</span> <span style="color:#a6e22e">updateTaskItem</span><span style="color:#f92672">(</span><span style="color:#a6e22e">@RequestBody</span> Tasks task<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3</span><span>    task <span style="color:#f92672">=</span> todoService<span style="color:#f92672">.</span><span style="color:#a6e22e">createOrUpdate</span><span style="color:#f92672">(</span>task<span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4</span><span>    <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">new</span> ResponseEntity<span style="color:#f92672">&lt;&gt;(</span>task<span style="color:#f92672">,</span> HttpStatus<span style="color:#f92672">.</span><span style="color:#a6e22e">OK</span><span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5</span><span><span style="color:#f92672">}</span>
</span></span></code></pre></div><table><tbody><tr><td><strong>HTTP Method</strong></td><td>PUT</td></tr><tr><td><strong>Endpoint URL</strong></td><td><em>http://localhost:8080/todo-app/tasks</em></td></tr><tr><td><strong>Request Header</strong></td><td><code>Content-type: application/json</code></td></tr><tr><td><strong>Request Body</strong></td><td><code><em>{<br>&nbsp;&nbsp;"systemTasksId":&nbsp;1,<br>&nbsp;&nbsp;"title":&nbsp;"Testing&nbsp;the&nbsp;Application",<br>&nbsp;&nbsp;"description":&nbsp;"Testing&nbsp;the&nbsp;Application",<br>&nbsp;&nbsp;"creationDate":&nbsp;"2022-05-19",<br>&nbsp;&nbsp;"dueDate":&nbsp;"2022-05-31",<br>&nbsp;&nbsp;"status":&nbsp;"IN_PROGRESS",<br>&nbsp;&nbsp;"todoTaskCommentsSet":&nbsp;[{<br>&nbsp;&nbsp;&nbsp;&nbsp;"taskComments":&nbsp;"Testing comments 1"<br>&nbsp;&nbsp;}]<br>}</em></code></td></tr></tbody></table>
<p>
  <figure>
    <img src="images/update-api-response-2.jpeg" alt="update-api-response-2.jpeg" style="display: block;margin: 0.7rem auto;">
    <figcaption style="text-align: center;font-style: italic;font-size: smaller;">Server Response for PUT API call</figcaption>
  </figure>
</p>
<hr>
<h3 id="add-rest-api-endpoint-for-delete-operation">Add REST API Endpoint for DELETE Operation</h3>
<table>
<thead>
<tr>
<th style="text-align:center">Description</th>
<th style="text-align:center">CRUD Operation</th>
<th style="text-align:center">HTTP Method</th>
<th style="text-align:center">REST API Endpoint</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">Delete One Specific Todo Task</td>
<td style="text-align:center">DELETE</td>
<td style="text-align:center">DELETE</td>
<td style="text-align:center"><code>/todo-app/tasks/{id}</code></td>
</tr>
</tbody>
</table>
<p>For creating this endpoint, we would need to update following classes:</p>
<ul>
<li><strong>Service Class</strong> = <code>service.TodoService</code></li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1</span><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">boolean</span> <span style="color:#a6e22e">deleteById</span><span style="color:#f92672">(</span><span style="color:#66d9ef">long</span> id<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2</span><span>    <span style="color:#66d9ef">boolean</span> isDeleted <span style="color:#f92672">=</span> <span style="color:#66d9ef">false</span><span style="color:#f92672">;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3</span><span>    <span style="color:#66d9ef">try</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4</span><span>        <span style="color:#75715e">//Delete the TaskComments before deleting the tasks.
</span></span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5</span><span><span style="color:#75715e"></span>        Optional<span style="color:#f92672">&lt;</span>Tasks<span style="color:#f92672">&gt;</span> deletionTask <span style="color:#f92672">=</span> findById<span style="color:#f92672">(</span>id<span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6</span><span>        <span style="color:#66d9ef">if</span><span style="color:#f92672">(</span>deletionTask<span style="color:#f92672">.</span><span style="color:#a6e22e">isPresent</span><span style="color:#f92672">())</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7</span><span>            Set<span style="color:#f92672">&lt;</span>TodoTaskComments<span style="color:#f92672">&gt;</span> todoTaskCommentsSet <span style="color:#f92672">=</span> deletionTask<span style="color:#f92672">.</span><span style="color:#a6e22e">get</span><span style="color:#f92672">().</span><span style="color:#a6e22e">getTodoTaskCommentsSet</span><span style="color:#f92672">();</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8</span><span>            <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>todoTaskCommentsSet <span style="color:#f92672">!=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9</span><span>                <span style="color:#66d9ef">for</span> <span style="color:#f92672">(</span>TodoTaskComments todoTaskComments <span style="color:#f92672">:</span> todoTaskCommentsSet<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10</span><span>                    todoTaskCommentsRepository<span style="color:#f92672">.</span><span style="color:#a6e22e">delete</span><span style="color:#f92672">(</span>todoTaskComments<span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11</span><span>                <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12</span><span>                tasksRepository<span style="color:#f92672">.</span><span style="color:#a6e22e">delete</span><span style="color:#f92672">(</span>deletionTask<span style="color:#f92672">.</span><span style="color:#a6e22e">get</span><span style="color:#f92672">());</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13</span><span>                isDeleted <span style="color:#f92672">=</span> <span style="color:#66d9ef">true</span><span style="color:#f92672">;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14</span><span>            <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15</span><span>        <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16</span><span>    <span style="color:#f92672">}</span> <span style="color:#66d9ef">catch</span> <span style="color:#f92672">(</span>Exception ex<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17</span><span>        ex<span style="color:#f92672">.</span><span style="color:#a6e22e">getMessage</span><span style="color:#f92672">();</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18</span><span>    <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19</span><span>    <span style="color:#66d9ef">return</span> isDeleted<span style="color:#f92672">;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20</span><span><span style="color:#f92672">}</span>
</span></span></code></pre></div><ul>
<li><strong>Controller Class</strong> = <code>controller.TodoController</code></li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1</span><span><span style="color:#a6e22e">@DeleteMapping</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;/{id}&#34;</span><span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2</span><span><span style="color:#66d9ef">public</span> ResponseEntity<span style="color:#f92672">&lt;</span>HttpStatus<span style="color:#f92672">&gt;</span> <span style="color:#a6e22e">deleteTaskById</span><span style="color:#f92672">(</span><span style="color:#a6e22e">@PathVariable</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;id&#34;</span><span style="color:#f92672">)</span> <span style="color:#66d9ef">long</span> id<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3</span><span>    <span style="color:#66d9ef">try</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4</span><span>        <span style="color:#66d9ef">if</span><span style="color:#f92672">(</span>todoService<span style="color:#f92672">.</span><span style="color:#a6e22e">deleteById</span><span style="color:#f92672">(</span>id<span style="color:#f92672">))</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5</span><span>            <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">new</span> ResponseEntity<span style="color:#f92672">&lt;&gt;(</span>HttpStatus<span style="color:#f92672">.</span><span style="color:#a6e22e">NO_CONTENT</span><span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6</span><span>        <span style="color:#66d9ef">else</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7</span><span>            <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">new</span> ResponseEntity<span style="color:#f92672">&lt;&gt;(</span><span style="color:#66d9ef">null</span><span style="color:#f92672">,</span> HttpStatus<span style="color:#f92672">.</span><span style="color:#a6e22e">NOT_FOUND</span><span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8</span><span>    <span style="color:#f92672">}</span> <span style="color:#66d9ef">catch</span> <span style="color:#f92672">(</span>Exception ex<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9</span><span>        <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">new</span> ResponseEntity<span style="color:#f92672">&lt;&gt;(</span><span style="color:#66d9ef">null</span><span style="color:#f92672">,</span> HttpStatus<span style="color:#f92672">.</span><span style="color:#a6e22e">INTERNAL_SERVER_ERROR</span><span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10</span><span>    <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11</span><span><span style="color:#f92672">}</span>
</span></span></code></pre></div><p>Now, <em>Open any REST client</em> and provide values, as per the below table</p>
<table>
<thead>
<tr>
<th style="text-align:center">HTTP Method</th>
<th style="text-align:center">Endpoint URL</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">DELETE</td>
<td style="text-align:center"><code>http://localhost:8080/todo-app/tasks/1</code></td>
</tr>
</tbody>
</table>
<p>Response from the Server

  <figure>
    <img src="images/delete-api-response.jpeg" alt="delete-api-response.jpeg" style="display: block;margin: 0.7rem auto;">
    <figcaption style="text-align: center;font-style: italic;font-size: smaller;">Server Response for Delete API call</figcaption>
  </figure>
</p>
<hr>
<h2 id="configure-spring-boot-to-handle-cors-request">Configure Spring Boot to Handle CORS Request</h2>
<p>By default, the Spring Boot REST API which is running on <code>http://localhost:8080/</code>, will not allow requests from frontend applications through domains like <code>http://localhost:3000/</code>.</p>
<p>This is called <em><strong><a href="https://en.wikipedia.org/wiki/Cross-origin_resource_sharing"
 target="_blank">CORS (Cross-Origin Resource Sharing) policy</a></strong></em>, where in by default, servers block request coming from other servers or domains.</p>
<p>Let’s configure Rest Resource to allow access from specific server(s), in order to allow our frontend applications(will be developed later) to make REST APIs calls to this Spring Boot Server.</p>
<ul>
<li>Update the <strong>Rest Controller</strong> = <code>controller.TodoController</code>, to allow request from <strong>our frontend applications</strong> <code>(http://localhost:3000/)</code>.</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span><span><span style="color:#a6e22e">@CrossOrigin</span><span style="color:#f92672">(</span>origins <span style="color:#f92672">=</span> <span style="color:#f92672">{</span> <span style="color:#e6db74">&#34;http://localhost:3000&#34;</span> <span style="color:#f92672">})</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2</span><span><span style="color:#a6e22e">@RequestMapping</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;/tasks&#34;</span><span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3</span><span><span style="color:#a6e22e">@RestController</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4</span><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">TodoController</span> <span style="color:#f92672">{</span> 
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5</span><span>    <span style="color:#75715e">//Other Codes
</span></span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6</span><span><span style="color:#75715e"></span><span style="color:#f92672">}</span>
</span></span></code></pre></div><hr>
<h2 id="conclusion">Conclusion</h2>
<p>With these endpoints’ setup, we have come to an end of this article and we have enabled <em><strong>CRUD (Create, Read, Update, Delete) Operations</strong></em> <em>using below REST API Endpoints</em> and they are ready to be consumed by any frontend or other microservice applications.</p>
<table>
<thead>
<tr>
<th style="text-align:center">Description</th>
<th style="text-align:center">CRUD Operation</th>
<th style="text-align:center">HTTP Method</th>
<th style="text-align:center">REST API Endpoint</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">Create New Todo Task</td>
<td style="text-align:center">CREATE</td>
<td style="text-align:center">POST</td>
<td style="text-align:center"><code>/todo-app/tasks/</code></td>
</tr>
<tr>
<td style="text-align:center">Fetch All Todo Tasks</td>
<td style="text-align:center">READ</td>
<td style="text-align:center">GET</td>
<td style="text-align:center"><code>/todo-app/tasks/</code></td>
</tr>
<tr>
<td style="text-align:center">Fetch One Todo Task</td>
<td style="text-align:center">READ</td>
<td style="text-align:center">GET</td>
<td style="text-align:center"><code>/todo-app/tasks/{id}</code></td>
</tr>
<tr>
<td style="text-align:center">Update One Specific Todo Task</td>
<td style="text-align:center">UPDATE</td>
<td style="text-align:center">PUT</td>
<td style="text-align:center"><code>/todo-app/tasks/</code></td>
</tr>
<tr>
<td style="text-align:center">Delete One Specific Todo Task</td>
<td style="text-align:center">DELETE</td>
<td style="text-align:center">DELETE</td>
<td style="text-align:center"><code>/todo-app/tasks/{id}</code></td>
</tr>
</tbody>
</table>
<p>Through this article, you have learned about how to:</p>
<ul>
<li>Configure Hibernate to work with <em>Relational Database</em> and persist the data.</li>
<li>Create and Expose <em><strong>REST APIs</strong></em> for CRUD Operations using <strong>Spring Boot</strong>.</li>
<li>Handle <em><strong>HTTP</strong></em> and <em><strong>CORS</strong></em> Requests through REST Controller.</li>
</ul>
<p>Complete code for this project can be found at GitHub <a href="https://github.com/prasbhat/microservice-springboot-h2"
 target="_blank">here</a>.</p>
<p><em>Instructions on how to clone the code repository and run the project are provided on the GitHub project page.</em></p>
		</div>
		<footer class="post__footer">
			
<div class="post__tags tags clearfix">
	<svg class="tags__badge icon icon-tag" width="16" height="16" viewBox="0 0 32 32"><path d="M32 19c0 1-1 2-1 2L21 31s-1 1-2 1-2-1-2-1L2 16c-1-1-1.4-2-1.4-2S0 12.5 0 11V3C0 1.5.8.8.8.8S1.5 0 3 0h8c1.5 0 3 .6 3 .6S15 1 16 2l15 15s1 1 1 2zM7 10a3 3 0 1 0 0-6 3 3 0 0 0 0 6z"/></svg>
	<ul class="tags__list">
		<li class="tags__item">
			<a class="tags__link btn" href="/tags/h2-database/" rel="tag">H2 Database</a>
		</li>
		<li class="tags__item">
			<a class="tags__link btn" href="/tags/hibernate/" rel="tag">Hibernate</a>
		</li>
		<li class="tags__item">
			<a class="tags__link btn" href="/tags/java/" rel="tag">Java</a>
		</li>
		<li class="tags__item">
			<a class="tags__link btn" href="/tags/relational-database/" rel="tag">Relational Database</a>
		</li>
		<li class="tags__item">
			<a class="tags__link btn" href="/tags/microservice/" rel="tag">Microservice</a>
		</li>
		<li class="tags__item">
			<a class="tags__link btn" href="/tags/spring-boot/" rel="tag">Spring Boot</a>
		</li>
	</ul>
</div>
		</footer>
	</article>
</main>

<div class="authorbox clearfix">
	<div class="authorbox__header">
		<span class="authorbox__name">About Prashanth Bhat</span>
	</div>
	<div class="authorbox__description">
		<strong>Prashanth Bhat</strong> has about 15+ years of <strong>Developing/Coding</strong> knowledge. <em>He loves to work with Technology, learn new things and share his learnings with others</em>. For comments/feedback you can reach <a href="mailto:bhatpp.android@gmail.com"
>here</a>.
	</div>
</div>

<nav class="pager flex">
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/post/microservice-springboot-mongodb/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Microservice Using Spring Boot, Hibernate and MongoDB Database</p>
		</a>
	</div>
</nav>
<script src="https://utteranc.es/client.js"
	repo="prasbhat/prasbhat.github.io"
	issue-term="title"
	label="Comments"
	theme="github-light"
	crossorigin="anonymous"
	async>
</script>

			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2020-2023 myzonesoft.com
		</div>
	</div>
</footer>
	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>